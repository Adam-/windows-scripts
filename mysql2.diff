diff --git a/mysys/my_gethwaddr.c b/mysys/my_gethwaddr.c
index 780c765..d4edfc8 100644
--- a/mysys/my_gethwaddr.c
+++ b/mysys/my_gethwaddr.c
@@ -126,7 +126,7 @@ my_bool my_gethwaddr(uchar *to)
   return res;
 }
 
-#elif defined(_WIN32)
+#elif defined(_WIN32) && defined(WTF)
 
 /*
   Workaround for BUG#32082 (Definition of VOID in my_global.h conflicts with
